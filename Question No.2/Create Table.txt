CREATE TABLE Manufacturer (
ManufacturerID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
ManufacturerName VARCHAR(255),
RegistrationCode VARCHAR(10),
Address VARCHAR(255)
);


CREATE TABLE Category (
CategoryID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
CategoryName VARCHAR(255)
);


CREATE TABLE Outlet (
OutletID INT PRIMARY KEY,
Province VARCHAR2(255),
District VARCHAR2(255),
City VARCHAR2(255),
Address VARCHAR2(255),
TelephoneNumber VARCHAR2(10),
CONSTRAINT Outlet_OutletID_ck CHECK (OutletID >= 1000 AND OutletID <= 9999)
);


CREATE TABLE Product (
ProductID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
ProductName VARCHAR(255),
ManufacturerID NUMBER,
Price DECIMAL(10, 2),
CategoryID INT,
OutletID INT,
FOREIGN KEY (ManufacturerID) REFERENCES Manufacturer(ManufacturerID),
FOREIGN KEY (CategoryID) REFERENCES Category(CategoryID),
FOREIGN KEY (OutletID) REFERENCES Outlet(OutletID)
);


CREATE TABLE Batch (
BatchCode VARCHAR(255) PRIMARY KEY,
ProductID NUMBER,
ManufacturedDate DATE,
ExpirationDate DATE,
RetailPrice DECIMAL(10, 2),
FOREIGN KEY (ProductID) REFERENCES Product(ProductID)
);


CREATE TABLE SKU (
SKUCode VARCHAR(36) PRIMARY KEY,
ProductID NUMBER,
OutletID INT,
BatchCode VARCHAR(255),
FOREIGN KEY (ProductID) REFERENCES Product(ProductID),
FOREIGN KEY (OutletID) REFERENCES Outlet(OutletID)
);


CREATE TABLE LoyaltyCard (
LoyaltyCardNumber VARCHAR(255) PRIMARY KEY,
IssuedDate DATE,
ExpiryDate DATE,
RetailPrice DECIMAL(10, 2)
);


CREATE TABLE Customer (
CustomerID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
FirstName VARCHAR(255),
LastName VARCHAR(255),
DoB DATE,
NIC VARCHAR(255),
Gender VARCHAR2(6),
MobileNo VARCHAR(10),
LoyaltyCardNumber VARCHAR(255),
FOREIGN KEY (LoyaltyCardNumber) REFERENCES LoyaltyCard(LoyaltyCardNumber)
);


CREATE TABLE Bill (
BillNumber NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
BillDate DATE,
OutletID INT,
LoyaltyCardNumber VARCHAR(255),
CustomerID NUMBER,
SKUCode VARCHAR(36),
FOREIGN KEY (OutletID) REFERENCES Outlet(OutletID),
FOREIGN KEY (LoyaltyCardNumber) REFERENCES LoyaltyCard(LoyaltyCardNumber),
FOREIGN KEY (SKUCode) REFERENCES SKU(SKUCode)
);


CREATE TABLE PurchaseHistory (
PurchaseID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
BillNumber NUMBER,
SKUCode VARCHAR(36),
FOREIGN KEY (SKUCode) REFERENCES SKU(SKUCode),
FOREIGN KEY (BillNumber) REFERENCES Bill(BillNumber)
);


CREATE TABLE Discount (
ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
LoyaltyCardNumber VARCHAR(255),
ProductID NUMBER,
DiscountPercent FLOAT,
StartDate DATE,
EndDate DATE,
FOREIGN KEY (LoyaltyCardNumber) REFERENCES LoyaltyCard(LoyaltyCardNumber),
FOREIGN KEY (ProductID) REFERENCES Product(ProductID)
);